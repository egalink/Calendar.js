/*! calendar.js - v1.0.0 - 2018-03-01
* https://egalink.github.io/calendar.js/
* Copyright (c) 2018 Jakim Hern√°ndez; Licensed MIT */

!function(a){"use strict";function b(a){return document.createElement(a||"div")}function c(a){return a.parentElement||a.parentNode}function d(a,b,c){var d;void 0===c&&(c="0");for(var e=0;e<b;e++)d+=c;return(d+a).slice(-b)}function e(a){return(a||"_")+Math.random().toString(36).substr(2,9)}function f(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function g(a,b){return(document.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){return!(!a||!a.className)&&a.className.match(f(b))})(a,b)}function h(a){var b=arguments;return!(b.length<=1||"object"!=typeof a)&&(document.documentElement.classList?function(a,b){for(var c=1;c<b.length;c++)"string"==typeof b[c]&&a.classList.add(b[c]);return a}:function(a,b){for(var c=1;c<b.length;c++)g(a,b[c])||"string"!=typeof b[c]||(a.className+=(a.className?" ":"")+b[c]);return a})(a,b)}function i(a,b,c,d){if("addEventListener"in a)try{a.addEventListener(b,c,d)}catch(e){if("object"!=typeof c||!c.handleEvent)throw e;a.addEventListener(b,function(a){c.handleEvent.call(c,a)},d)}else"attachEvent"in a&&("object"==typeof c&&c.handleEvent?a.attachEvent("on"+b,function(){c.handleEvent.call(c)}):a.attachEvent("on"+b,c));return a}function j(a){var b=/^([0-9]{4}|[0-9]{2})[.\/-]([0]?[1-9]|[1][0-2])[.\/-]([0]?[1-9]|[1|2][0-9]|[3][0|1])$/,c=/^([0-9]{4}|[0-9]{2})[.\/-]([0]?[1-9]|[1][0-2])[.\/-]([0]?[1-9]|[1|2][0-9]|[3][0|1]) (?:2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])$/;return!(!b.test(a)&&!c.test(a))&&new Date(a.replace(/[.\/-]/g,"/"))}function k(a){return/^(?:#([\w-]+))$/.test(a)}function l(a){return/^(?:\.([\w-]+))$/.test(a)}function m(a,f){var g=o,k=p,l=q,m=o,n=p,u=q,v=s(!0,r,f);for(var w in v.events)!0===v.events.hasOwnProperty(w)&&(v.events[w].id=e(w));var x=function(){k>0?k--:(k=11,l--),G()},y=function(){g=m,k=n,l=u,G()},z=function(){k<11?k++:(k=0,l++),G()},A=function(a){var c=h(b(),"c-header"),d=h(b("button"),"c-button","c-button--prev");d.type="button",d.innerHTML=v.i18n.prevMonth||"%lt;",c.appendChild(i(d,"click",x));var e=h(b(),"c-month");e.innerHTML=v.i18n.months[k]+" "+l,c.appendChild(e);var f=h(b("button"),"c-button","c-button--next");return f.type="button",f.innerHTML=v.i18n.nextMonth||"%gt;",c.appendChild(i(f,"click",z)),a.appendChild(c),a},B=function(a){var c=v.weekOffset,d=h(b(),"c-weekdays");c<0&&(c=0);for(var e=0;e<7;e++){c>6&&(c=0);var f=h(b(),"c-weekday");f.innerHTML=v.i18n.weekdays[c]||":weekdays:",d.appendChild(f),c++}return a.appendChild(d),a},C=function(a){var b=0,c=v.events;if(c.length<1)return 0;for(var d in c)if(!0===c.hasOwnProperty(d)){var e=j(c[d].datetime);if(!1===e)continue;e.getDate()==a&&e.getMonth()==k&&e.getFullYear()==l&&b++}return b},D=function(a){a=j(a);var b=0,c=[],d=v.events;if(d.length<1||!1===a)return c;for(var e in d)if(!0===d.hasOwnProperty(e)){var f=j(d[e].datetime);if(!1===f)continue;f.getDate()===a.getDate()&&f.getMonth()===a.getMonth()&&f.getFullYear()===a.getFullYear()&&(c[b++]=d[e])}return c},E=function(a){return i(a,"click",function(a){a.preventDefault();var b=c(a.target).getAttribute("data-date");v.onDayClick(a.target,b,D(b))}),a},F=function(a){var c=v.weekOffset;(c<0||c>6)&&(c=0);var e=h(b(),"c-days"),f=new Date(l,k,1).getDay()-c;f<0&&(f=-1*(f+1),f=6-f);for(var g=new Date(l,k+0,0),i=new Date(l,k+1,0),j=i.getDate(),o=g.getDate()-f+1,p=1,q=1,r=function(a){var c=g.getFullYear();c+="-",c+=d(g.getMonth()+1,2),c+="-",c+=d(o,2),h(a,"c-day--previous-month").setAttribute("data-date",c);var e=h(b("a"),"c-day-number");e.href="",e.innerHTML=o++,a.appendChild(E(e))},s=function(a){var c=l;c+="-",c+=d(k+1,2),c+="-",c+=d(p,2),a.setAttribute("data-date",c);var e=h(b("a"),"c-day-number");e.href="",e.innerHTML=p++,a.appendChild(E(e))},t=function(a){var c=k+1>=12?l+1:l;c+="-",c+=d(k+2>=13?"01":k+2,2),c+="-",c+=d(q,2),h(a,"c-day--next-month").setAttribute("data-date",c);var e=h(b("a"),"c-day-number");e.href="",e.innerHTML=q++,a.appendChild(E(e))},w=0;w<42;w++){var x=function(a,b){if(b<f)r(a);else if(p<=j){p==m&&k==n&&l==u&&h(a,"c-day--today");var c=C(p);c>0&&h(a,"c-day--has-events").setAttribute("data-num-events",c),s(a)}else t(a);return a}(h(b("span"),"c-day"),w);e.appendChild(x)}return a.appendChild(e)},G=function(){var c=a.childNodes;if(c)for(var d=0;d<c.length;d++)a.removeChild(c[d]);var e=h(b(),"c-body");A(e),B(e),F(e),h(a,v.theme||"").appendChild(e)};t.prototype.nextMonth=z,t.prototype.prevMonth=x,t.prototype.currMonth=y,t.prototype.dateParse=j,t.prototype.addEvents=function(a){if(arguments.length>1)for(var b=0;b<arguments.length;b++)this.addEvents(arguments[b]);else a.id||(a.id=e()),v.events.push(a);G()},t.prototype.getEvents=function(a){return a?D(a):v.events},t.prototype.removeEvent=function(a){if(!a)return!1;var b=0,c=[],d=v.events;for(var e in d)if(!0===d.hasOwnProperty(e)){if(d[e].id==a)continue;c[b++]=d[e]}v.events=c,G()},t.prototype.onDayClick=function(a){"function"==typeof a&&(v.onDayClick=a)},G()}var n=new Date,o=n.getDate(),p=n.getMonth(),q=n.getFullYear(),r={theme:"calendar",i18n:{prevMonth:"<",nextMonth:">",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},events:[],weekOffset:0,onDayClick:function(a,b,c){}},s=function(){var a={},b=!1,c=0,d=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],c++);for(c;c<d;c++){var e=arguments[c];!function(c){for(var d in c)!0===Object.prototype.hasOwnProperty.call(c,d)&&(b&&"[object Object]"===Object.prototype.toString.call(c[d])?a[d]=s(!0,a[d],c[d]):a[d]=c[d])}(e)}return a},t=function(a,b){if("string"==typeof a){if(!0!==k(a)&&!0!==l(a))throw new Error("You must provide a valid CSS selector or Element Object as first parameter.");a=document.querySelectorAll(a)}if(!a)throw new Error("Element Object is undefined.");if(!1===a.isNodeList())m(a,b);else for(var c=0;c<a.length;c++)m(a[c],b)};Element.prototype.isNodeList=function(){return!1},NodeList.prototype.isNodeList=HTMLCollection.prototype.isNodeList=function(){return!0},window.Calendar=t}(window);